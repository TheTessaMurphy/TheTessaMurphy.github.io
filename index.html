<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ExpressProject</title>
  </head>
  <body>

    <h1>Reading and Writing to a JSON file</h1>
    
    <button id="btnPost">Post</button> <button id="btnGet">Get</button>
    <p id = "output"></p>

  <script>
  
    document.getElementById("btnPost").addEventListener("click", sendVariables); 
    document.getElementById("btnGet").addEventListener("click", getFromFile); 

    function sendVariables(){

      var numbers = ["1942", "1984", "1995"];
      var singers = [{"name":"James Paul McCartney","age": "81", "birthplace": "Liverpool"},{"name":"Taylor Swift ","age":"34","birthplace":"West Reading, PA"}];
      var greeting = "It is the dawning of the age of Aquarius";
      var foods = {"food" : "chocolate", "taste":"very very good", "necessary": "true"};
      var arr1 = [{"name":"Ringo Starr","age": "81", "birthplace": "Liverpool"},{"name":"Joni Mitchell ","age":"34","birthplace":"West Reading, PA"}];

      var data = {singers: singers, greeting: greeting}
      postToJSON(data)
    } 
    
    
    function postToJSON(data){
    
      //Variables containing data in different formats.
      

      //Variable containing the info that will be posted
       
      
      //Method that posts to File
      fetch('/amendJsonFile', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json',
    },
          body: JSON.stringify(data)
    
      })
     
      .then(response => response.json())          //Sends a response
      .then(data => alert(JSON.stringify(data)))
      .catch(error => console.log(error));        //catches errors
    }

    function getFromFile(){
      
      const info = "singers"             //Defines the key of the object being retrieved.
      const file = "myJson.json"       //Defines the file being retrieved from.
      
      fetch(file)

      .then(response => response.json())   //Receives a response
      .then(data => {                      
              
        const obj = data;            //Parses the response
        
        //Prints the response to the browser.
        document.getElementById("output").innerHTML = JSON.stringify(obj);
        
      });
}  
    
  </script>

  </body>
  </html>

